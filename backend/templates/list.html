{% extends 'base.html' %}
{% block title %}Contatos{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-5">
  <h2 class="fw-semibold display-6 text-dark">Contatos</h2>
  <a href="{{ url_for('contacts.create_contact') }}" class="btn btn-dark rounded-pill px-4 py-2 shadow-sm">
    + Novo Contato
  </a>
</div>

<div class="row g-4">
  {% for contact in contacts %}

  <div class="col-12 col-md-6 col-lg-4">
    <div class="card border-0 shadow-sm rounded-4 h-100 hover-card">
      <div class="card-body text-center p-5 d-flex flex-column align-items-center justify-content-between">
        
        <!-- Foto de perfil -->
        <div class="profile-pic mb-4">
          {% if contact.profile_picture %}
            <img src="/{{ contact.profile_picture }}" alt="Foto" class="rounded-circle">
          {% else %}
            <img src="/static/images/default.webp" alt="Foto" class="rounded-circle">
          {% endif %}
        </div>

        <!-- Nome -->
        <h5 class="fw-semibold mb-1">{{ contact.name }}</h5>

        <!-- Contatos -->
        <p class="text-secondary small mb-1">{{ contact.telephone }}</p>
        <p class="text-secondary small">{{ contact.email }}</p>

        <!-- Ações -->
        <div class="d-flex justify-content-center gap-2 mt-4">
          <a href="{{ url_for('contacts.get_contact', contact_id=contact.id) }}" 
             class="btn btn-sm btn-outline-dark rounded-pill px-3">
            <i class="bi bi-eye"></i>
          </a>
          <a href="{{ url_for('contacts.update_contact', contact_id=contact.id) }}" 
             class="btn btn-sm btn-outline-dark rounded-pill px-3">
            <i class="bi bi-pencil"></i>
          </a>
          <form action="{{ url_for('contacts.delete_contact', contact_id=contact.id) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-sm btn-outline-danger rounded-pill px-3"
                    onclick="return confirm('Tem certeza?')">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}